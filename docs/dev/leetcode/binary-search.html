<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Binary Search - logbook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../maxfoo/maxfoo.html">Max FOO</a></li><li class="chapter-item "><a href="../../todos.html">TODO</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">SEC</li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">DEV</li><li class="chapter-item "><a href="../../dev/java/java.html">JAVA</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../dev/java/virtual-thread/virtual-thread.html">Virtual Thread</a></li><li class="chapter-item "><a href="../../dev/java/java-concurrency.html">Concurrency</a></li><li class="chapter-item "><a href="../../dev/java/tips_and_tricks/tips_and_tricks.html">Tips and Tricks</a></li></ol></li><li class="chapter-item "><a href="../../dev/data-structure/data-structure.html">Data Structure</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../dev/data-structure/bloom-filter/bloom-filter.html">Bloom Filter</a></li></ol></li><li class="chapter-item "><a href="../../dev/distributed-systems/distributed-system.html">Distributed Systems</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../dev/distributed-systems/cse138/cse138.html">CSE138</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../dev/distributed-systems/cse138/distributed-system-what-and-why/distributed-system-what-and-why.html">Distributed System What and Why</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../dev/leetcode/leetcode.html">LeetCode</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/leetcode/binary-search.html" class="active">Binary Search</a></li><li class="spacer"></li><li class="spacer"></li></ol></li><li class="chapter-item "><li class="part-title">BOOK</li><li class="chapter-item "><a href="../../book/java-concurrency-in-practice/java-concurrency-in-practice.html">Java Concurrency In Practice</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../book/java-concurrency-in-practice/thread_safety.html">Thread Safety</a></li><li class="chapter-item "><a href="../../book/java-concurrency-in-practice/sharing_object.html">Sharing Object</a></li></ol></li><li class="chapter-item "><a href="../../book/the-rust-programming-language/the-rust-programming-language.html">The Rust Programming Language</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../book/the-rust-programming-language/cargo.html">Cargo</a></li><li class="chapter-item "><a href="../../book/the-rust-programming-language/common-programming-concept.html">Common Programming Concept</a></li><li class="chapter-item "><a href="../../book/the-rust-programming-language/rust-memory-model.html">Rust Memory Model</a></li><li class="chapter-item "><a href="../../book/the-rust-programming-language/ownership/ownership.html">Ownership</a></li><li class="chapter-item "><a href="../../book/the-rust-programming-language/fight-with-borrow-checker.html">Fight With Borrow Checker</a></li><li class="chapter-item "><a href="../../book/the-rust-programming-language/struct.html">Struct</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><li class="part-title">You Might Be Interested In</li><li class="chapter-item "><a href="../../great-content.html">Grate Content</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">logbook</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="binary-search"><a class="header" href="#binary-search">Binary Search</a></h1>
<h2 id="general-approach"><a class="header" href="#general-approach">General Approach</a></h2>
<ol>
<li>handle coner case</li>
<li>define search space
<ul>
<li>[left, right] or <em><strong>[left, right)</strong></em></li>
</ul>
</li>
<li>deduce stop condition from seaching space</li>
<li>mid value: <em>(left + right) / 2</em> may cause overflow, better use <em><strong>((right - left) &gt;&gt; 1) + left</strong></em></li>
<li>according to search space, update left/right</li>
</ol>
<h2 id="questions"><a class="header" href="#questions">Questions</a></h2>
<h3 id="classic-binary-search"><a class="header" href="#classic-binary-search">Classic binary search</a></h3>
<pre><code class="language-text">Given an array of integers nums which is sorted in ascending order, and an integer target,
write a function to search target in nums. If target exists, then return its index.
Otherwise, return -1.

You must write an algorithm with O(log n) runtime complexity.

Input: nums = [-1,0,3,5,9,12], target = 9
Output: 4
Explanation: 9 exists in nums and its index is 4

Input: nums = [-1,0,3,5,9,12], target = 2
Output: -1
Explanation: 2 does not exist in nums so return -1

Constraints:

  -  1 &lt;= nums.length &lt;= 104
  -  -10^4 &lt; nums[i], target &lt; 10^4
  -  All the integers in nums are unique.
  -  nums is sorted in ascending order.

link: https://leetcode.com/problems/binary-search/
</code></pre>
<pre><code class="language-java">class _704 {
    public int search(int[] nums, int target) {
        // 1. Handle corner case
        if (nums.length == 1) return nums[0] == target ? 0 : -1;
        if (target &gt; nums[nums.length - 1]) return nums.length;

        // 2. define search space, here  [left, right)
        int left = 0;

        // 2. according to [left, right),
        // the search space do not include right pointer
        int right = nums.length;

        // 3. deduce stop condition from seaching space,
        //    according to [left, right), left == right is illegal
        while (left &lt; right) {
            // 4. be careful about overflow
            int mid = left + ((right - left) &gt;&gt; 1);

            if (nums[mid] == target) {
                return mid;
            } // 5. according to [left, right), update left/right
            else if (nums[mid] &lt; target) {
                left = mid + 1;
            } else {
                right = mid;
            }
        }

        return -1;
    }
}
</code></pre>
<h3 id="insertion-point"><a class="header" href="#insertion-point">Insertion Point</a></h3>
<ul>
<li>if target is found in array, the insertion point should be the index of the first target</li>
<li>left point will never go beyond right when search space is [left, right)</li>
<li>put the boundary of left pointer to target -&gt; left pointer will converage</li>
</ul>
<pre><code class="language-text"> Given a sorted array of distinct integers and a target value,
 return the index if the target is found.
 If not, return the index where it would be if it were inserted in order.

 You must write an algorithm with O(log n) runtime complexity.

 Input: nums = [1,3,5,6], target = 5
 Output: 2

 Input: nums = [1,3,5,6], target = 2
 Output: 1

 Input: nums = [1,3,5,6], target = 7
 Output: 4

 Constraints:
 - 1 &lt;= nums.length &lt;= 104
 - -10^4 &lt;= nums[i] &lt;= 10^4
 - nums contains distinct values sorted in ascending order.
 - -10^4 &lt;= target &lt;= 10^4

link: https://leetcode.com/problems/search-insert-position/
</code></pre>
<pre><code class="language-java">public class _35 {
    public int searchInsert(int[] nums, int target) {        
        if (target &lt; nums[0]) return 0;
        if (target &gt; nums[nums.length - 1]) return nums.length;

        int left = 0;
        int right = nums.length;

        while(left &lt; right) {
            int mid =  ((right - left) &gt;&gt; 1) + left;
            // left point will never go beyond right since search space is [left, right)
            // put right pointer to boundary -&gt; left pointer will converage
            if (target &lt;= nums[mid]) {
                right = mid;
            } else {
                left = mid + 1;
            }

        //  if (nums[mid] &lt; target) {
        //     left = mid + 1;
        // } else {
        //     right = mid;
        // }
        }

        return left;
    }
}
</code></pre>
<h3 id="first-and-last-position"><a class="header" href="#first-and-last-position">First and Last Position</a></h3>
<ul>
<li>variant of Q35</li>
<li>first apporach is the find the insertion point, then nevigate the pointer to find last element
<ul>
<li>this apporach is slow when the distance between first and last element is far</li>
</ul>
</li>
<li>second apporach is to search insertion point of target value then search <em><strong>insertion point of (target + 1)</strong></em></li>
</ul>
<blockquote>
<p>please handle the coner case and boundary check carefully, and think about how to reduce the search space by boundary check</p>
</blockquote>
<pre><code class="language-text"> Given an array of integers nums sorted in non-decreasing order,
 find the starting and ending position of a given target value.
 If target is not found in the array, return [-1, -1].

 You must write an algorithm with O(log n) runtime complexity.

 Input: nums = [5,7,7,8,8,10], target = 8
 Output: [3,4]

 Input: nums = [5,7,7,8,8,10], target = 6
 Output: [-1,-1]

 Input: nums = [], target = 0
 Output: [-1,-1]

 Constraints:
 - 0 &lt;= nums.length &lt;= 10^5
 - -10^9 &lt;= nums[i] &lt;= 10^9
 - nums is a non-decreasing array.
 - -10^9 &lt;= target &lt;= 10^9

link: https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array
</code></pre>
<pre><code class="language-java">public class _34 {
    public int[] searchRange(int[] nums, int target) {
        if (nums.length == 0) return new int[]{-1, -1};

        if (nums.length == 1) return nums[0] == target ? new int[]{0, 0} : new int[]{-1, -1};

        // reduce the search space by boundary check
        if (nums[nums.length - 1] &lt; target) return new int[]{-1, -1};

        int left = binarySearch(nums, 0, target);
        if (nums[left] != target) return new int[]{-1, -1};
        if (left == nums.length - 1) return new int[]{left, left};

        int right = binarySearch(nums, left, target + 1);
        if (right &gt;= nums.length) return new int[]{left, right - 1};
        if (nums[right] &gt; target) return new int[]{left, right - 1};
        return new int[]{left, right};


    }

    private int binarySearch(int[] nums, int start, int target) {
        int left = start;
        int right = nums.length;
        while (left &lt; right) {
            int mid = left + ((right - left) &gt;&gt; 1);
            if (target &lt;= nums[mid]) {
                right = mid;
            } else {
                left = mid + 1;
            }
        }

        return left;
    }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../dev/leetcode/leetcode.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../book/java-concurrency-in-practice/java-concurrency-in-practice.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../dev/leetcode/leetcode.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../book/java-concurrency-in-practice/java-concurrency-in-practice.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
